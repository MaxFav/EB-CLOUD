<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id='sh_analytic_account_session_view' model="ir.ui.view">
        <field name="name">sh.analytic.account.session.view.inherit</field>
        <field name='model'>pos.session</field>
        <field name='inherit_id' ref="point_of_sale.view_pos_session_form"></field>
        <field name='arch' type='xml'>
            <field name='start_at' position='after'>
                <field name="sh_analytic_account" groups="analytic.group_analytic_accounting"></field>
                <field name="sh_analytic_tags" groups="analytic.group_analytic_tags" widget="many2many_tags"></field>
            </field>
        </field>
    </record>
    <record id='sh_analytic_move_order_line_view_inherit' model="ir.ui.view">
        <field name="name">sh.analytic.account.move.order.line.view.inherit</field>
        <field name='model'>account.move.line</field>
        <field name='inherit_id' ref="account.view_move_line_tree_grouped"></field>
        <field name='arch' type='xml'>
            <field name='analytic_tag_ids' position="attributes">
                <attribute name="widget">many2many_tags</attribute>
            </field>
        </field>
    </record>
    <record id='sh_analytic_account_pos_payment_inherit' model="ir.ui.view">
        <field name="name">sh.analytic.account.pos.payment.view.inherit</field>
        <field name='model'>pos.payment</field>
        <field name='inherit_id' ref="point_of_sale.view_pos_payment_form"></field>
        <field name='arch' type='xml'>
            <field name='session_id' position='after'>
                <field name="sh_analytic_account" groups="analytic.group_analytic_accounting"></field>
                <field name="sh_analytic_tags" groups="analytic.group_analytic_tags" widget="many2many_tags"></field>
            </field>
        </field>
    </record>
    <record id='sh_analytic_account_pos_order_inherit_for_analytic_account' model="ir.ui.view">
        <field name="name">sh.analytic.account.pos.order.view.inherit</field>
        <field name='model'>pos.order</field>
        <field name='inherit_id' ref="point_of_sale.view_pos_pos_form"></field>
        <field name='arch' type='xml'>
            <xpath expr="//field[@name='payment_ids']//tree//field[@name='payment_method_id']" position='after'>
                <field name="sh_analytic_account" groups="analytic.group_analytic_accounting" />
                <field name="sh_analytic_tags" groups="analytic.group_analytic_tags" widget="many2many_tags" />
            </xpath>
            <field name="partner_id" position="after">
                <field name="sh_pos_order_analytic_account" groups="analytic.group_analytic_accounting" />
                <field name="sh_pos_order_analytic_account_tags" groups="analytic.group_analytic_tags" widget='many2many_tags' />
            </field>
            <xpath expr='//field[@name="lines"]//field[@name="qty"]' position='after'>
                <field name="sh_pos_order_analytic_account" groups="analytic.group_analytic_accounting" />
                <field name="sh_pos_order_analytic_account_tags" groups="analytic.group_analytic_tags" widget='many2many_tags' />
            </xpath>
        </field>
    </record>
    <record id='sh_analytic_account_pos_order_search_view_inherit' model="ir.ui.view">
        <field name="name">sh.analytic.account.pos.order.search.view.inherit</field>
        <field name='model'>pos.order</field>
        <field name='inherit_id' ref="point_of_sale.view_pos_order_filter"></field>
        <field name='arch' type='xml'>
            <xpath expr='//search//group' position="inside">
                <separator />
                <filter string="Analytic Account" groups="analytic.group_analytic_accounting" name="sh_groupby_account" domain="[]" context="{'group_by': 'sh_pos_order_analytic_account'}" />
            </xpath>
        </field>
    </record>
    <record id='sh_analytic_pos_saleorder_inherit_list_view' model="ir.ui.view">
        <field name="name">sh.analytic.account.pos.order.list.view.inherit</field>
        <field name='model'>pos.order</field>
        <field name='inherit_id' ref="point_of_sale.view_pos_order_tree"></field>
        <field name='arch' type='xml'>
            <field name="partner_id" position="after">
                <field name="sh_pos_order_analytic_account" groups="analytic.group_analytic_accounting" />
                <field name="sh_pos_order_analytic_account_tags" groups="analytic.group_analytic_tags" widget='many2many_tags' />
            </field>
        </field>
    </record>
    <record id="sh_analytic_account_config_view_inherit" model="ir.ui.view">
        <field name="name">sh.analtic.account.config.view.inherit</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_view_form"></field>
        <field name="arch" type="xml">
            <xpath expr="//div[@id='accounting_section']" position="inside">
                <div class="col-12 col-lg-6 o_setting_box">
                    <div class="o_setting_right_pane">
                        <label for="sh_analytic_account" groups="analytic.group_analytic_accounting"></label>
                        <field name="sh_analytic_account" groups="analytic.group_analytic_accounting"></field>
                    </div>
                    <div class="o_setting_right_pane">
                        <label for="sh_analytic_account_tags" groups="analytic.group_analytic_tags"></label>
                        <field name="sh_analytic_account_tags" groups="analytic.group_analytic_tags" widget="many2many_tags"></field>
                    </div>
                </div>
            </xpath>
        </field>
    </record>
</odoo>
